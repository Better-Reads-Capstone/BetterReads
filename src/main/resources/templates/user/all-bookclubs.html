<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="partials/head :: head(title = 'All Bookclubs')">
</head>
<body>
<nav th:replace="partials/navbar :: navbar"></nav>
<main>

    <div>
        <a class="nav-link" sec:authorize="isAnonymous()" th:href="@{/login}">Login to start a club</a>
        <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/create-club/{username} (username = ${#authentication.principal.username})}">Start a Bookclub</a>
    </div>
    <div>
        <form th:action="@{/bookclub/search}">
            <input name="query" />
            <button type="submit">Search</button>
        </form>
    </div>

    <ul th:each="bookclub : ${bookclubs}">
        <li>
            <div class="d-flex">
               <p th:text="${bookclub.name}"></p>
               <form th:action="@{/bookclub/{id}(id=${bookclub.id})}">
                   <button type="submit">Check it out</button>
               </form>
            </div>
        </li>
    </ul>
</main>

<footer th:replace="partials/footer :: footer"></footer>
</body>
</html>